[1mdiff --git a/html/community.php b/html/community.php[m
[1mindex ece30ae..bee9a59 100755[m
[1m--- a/html/community.php[m
[1m+++ b/html/community.php[m
[36m@@ -83,7 +83,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
     .starrr a.fa-star-o { color: #<?=$colour_dark?>; }[m
 [m
     #qa .bar { border: 1px solid #<?=$colour_dark?>; border-width: 1px 0; font-size: 0.8rem; background: #<?=$colour_light?>; display: flex; align-items: center; justify-content: space-between; min-height: calc(1.5rem + 2px); overflow: hidden; }[m
[31m-    #qa .bar:last-child { border-bottom: none; border-radius: 0 0 5px 5px; }[m
[32m+[m[32m    <?if($question){?>#qa .bar:last-child { border-bottom: none; border-radius: 0 0 5px 5px; }<?}?>[m
     #qa .bar:first-child { border-top: none; border-radius: 5px 0 0 0; }[m
     #qa .bar .title { margin-left: 0.4rem; }[m
     #qa .bar+.bar { border-top: none; }[m
[36m@@ -141,16 +141,12 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
 [m
     .pane { display: flex; }[m
     .panecontrol { display: none; }[m
[31m-    #ios-spacer { display: none; }[m
     @media (max-width: 576px){[m
       .hidepane { display: none; }[m
       .panecontrol { display: unset; }[m
       textarea,select,input { font-size: 16px; }[m
       #chattext-wrapper:not(:hover) button { display: unset; }[m
       header { flex-direction: unset; white-space: unset; }[m
[31m-      #ios-spacer { display: unset; }[m
[31m-      #poll { display: none; }[m
[31m-      #se { display: none; }[m
     }[m
   </style>[m
   <script src="/lib/lodash.js"></script>[m
[36m@@ -367,7 +363,6 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
         e.trigger('input');[m
       }[m
 [m
[31m-      if(localStorage.getItem('chat')) $('.pane').toggleClass('hidepane');[m
       $('#join').click(function(){[m
         if(confirm('This will set a cookie to identify your account. You must be 16 or over to join TopAnswers.')) { $.ajax({ type: "POST", url: '/uuid', async: false }).done(function(){[m
           window.location = '/profile?highlight-recovery';[m
[36m@@ -574,7 +569,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
   <title><?=$question?ccdb('select question_title from question where question_id=$1',$question):ccdb("select coalesce(room_name,initcap(community_name)||' Chat') room_name from room natural join community where room_id=$1",$room)?> - TopAnswers</title>[m
 </head>[m
 <body style="display: flex;">[m
[31m-  <main class="pane" style="background: #<?=$colour_dark?>; flex-direction: column; flex: 1 1 <?=($uuid)?ccdb("select login_resizer_percent from login"):'70'?>%; overflow: hidden;">[m
[32m+[m[32m  <main class="pane<?=$question?'':' hidepane'?>" style="background: #<?=$colour_dark?>; flex-direction: column; flex: 1 1 <?=($uuid)?ccdb("select login_resizer_percent from login"):'70'?>%; overflow: hidden;">[m
     <header style="border-bottom: 2px solid black;">[m
       <div>[m
         <a href="/<?=$community?>" style="color: #<?=$colour_mid?>;">TopAnswers</a>[m
[36m@@ -583,7 +578,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
             <option<?=($community===$community_name)?' selected':''?>><?=ucfirst($community_name)?></option>[m
           <?}?>[m
         </select>[m
[31m-        <input class="panecontrol" type="button" value="chat" onclick="localStorage.setItem('chat','chat'); $('.pane').toggleClass('hidepane'); $('#chattext').trigger('input').blur();">[m
[32m+[m[32m        <input class="panecontrol" type="button" value="chat" onclick="$('.pane').toggleClass('hidepane');">[m
       </div>[m
       <div style="display: flex; align-items: center;">[m
         <?if(!$uuid){?><input id="join" type="button" value="join"> or <input id="link" type="button" value="log in"><?}?>[m
[36m@@ -733,8 +728,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
       <?}?>[m
     </div>[m
   </main>[m
[31m-  <div id="chat-wrapper" class="pane hidepane" style="background: #<?=$colour_mid?>; flex: 1 1 <?=($uuid)?ccdb("select 100-login_resizer_percent from login"):'30'?>%; flex-direction: column-reverse; justify-content: flex-start; min-width: 0; overflow: hidden;">[m
[31m-    <div id="ios-spacer" style="flex: 0 0 76px;"></div>[m
[32m+[m[32m  <div id="chat-wrapper" class="pane<?=!$question?'':' hidepane'?>" style="background: #<?=$colour_mid?>; flex: 1 1 <?=($uuid)?ccdb("select 100-login_resizer_percent from login"):'30'?>%; flex-direction: column-reverse; justify-content: flex-start; min-width: 0; overflow: hidden;">[m
     <header style="border-top: 2px solid black;">[m
       <div style="display: flex; align-items: center;">[m
         <a <?=$dev?'href="/room?id='.$room.'" ':''?>class="icon"><img src="/roomicon?id=<?=$room?>"></a>[m
[36m@@ -755,7 +749,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
         <?}?>[m
         <a href="/transcript?room=<?=$room?>" style="color: #<?=$colour_mid?>;">transcript</a>[m
       </div>[m
[31m-      <input class="panecontrol" type="button" value="questions" onclick="localStorage.removeItem('chat'); $('.pane').toggleClass('hidepane');">[m
[32m+[m[32m      <input class="panecontrol" type="button" value="questions" onclick="$('.pane').toggleClass('hidepane');">[m
       <?if($uuid) if(intval(ccdb("select account_id from login"))<3){?><input id="poll" type="button" value="poll"><?}?>[m
     </header>[m
     <?if($canchat){?>[m
[36m@@ -789,7 +783,7 @@[m [mextract(cdb("select community_id,community_my_power,sesite_url,community_code_la[m
                             from chat_notification natural join chat c natural join room natural join community natural join account natural left join chat_flag natural left join chat_star[m
                                  natural left join (select question_room_id room_id, question_id, question_title from question) q[m
                             order by chat_at limit 100") as $r){ extract($r);?>[m
[31m-                <div id="n<?=$chat_id?>" class="message notification" style="background: #<?=$chat_mid_shade?>;" data-id="<?=$chat_id?>" data-name="<?=$account_name?>" data-reply-id="<?=$chat_reply_id?>">[m
[32m+[m[32m                <div id="n<?=$chat_id?>" class="message" style="background: #<?=$chat_mid_shade?>;" data-id="<?=$chat_id?>" data-name="<?=$account_name?>" data-reply-id="<?=$chat_reply_id?>">[m
                   <small class="who" title="<?=($account_is_me==='t')?'Me':$account_name?><?=$chat_reply_id?' replying to '.(($reply_account_is_me==='t')?'Me':$reply_account_name):''?> in <?=$room_name?>">[m
                     <?=($account_is_me==='t')?'<em>Me</em>':$account_name?>[m
                     <?if($room_id!==$room){?>[m
